(this["webpackJsonpreact-project"]=this["webpackJsonpreact-project"]||[]).push([[0],{180:function(e,t,s){},216:function(e,t){},218:function(e,t){},228:function(e,t){},230:function(e,t){},257:function(e,t){},259:function(e,t){},260:function(e,t){},265:function(e,t){},267:function(e,t){},273:function(e,t){},275:function(e,t){},294:function(e,t){},306:function(e,t){},309:function(e,t){},312:function(e,t,s){"use strict";s.r(t);var a=s(3),c=s.n(a),i=s(169),n=s.n(i),r=(s(180),s(14)),l=(s(41),s(20)),o=s(31),j=c.a.createContext({}),u=s(103);u.a.initializeApp({apiKey:"AIzaSyAFT7q685FFGr5p6u3dQ-8TFTFZiTuj9a8",authDomain:"tweet-react-project.firebaseapp.com",projectId:"tweet-react-project",storageBucket:"tweet-react-project.appspot.com",messagingSenderId:"955900648748",appId:"1:955900648748:web:96747dc87f364cf96ee089"});var d=s(2);var b=function(){var e=Object(a.useContext)(j),t=Object(l.g)(),s=u.a.auth().currentUser;if(null!==s)s.displayName,s.email,s.photoURL,s.emailVerified,s.uid;else t.push("/login");return Object(d.jsx)("div",{className:"navbar-wrapper",children:Object(d.jsxs)("div",{className:"navbar",children:[Object(d.jsxs)("div",{className:"navbar-left",children:[e.user&&Object(d.jsx)("div",{children:Object(d.jsx)(o.b,{className:"navbar-option",to:"/",children:"Home"})}),e.user&&Object(d.jsx)("div",{children:Object(d.jsx)(o.b,{className:"navbar-option",to:"/profile",children:"Profile"})})]}),Object(d.jsxs)("div",{className:"navbar-right",children:[Object(d.jsxs)("div",{children:[!e.user&&Object(d.jsx)(o.b,{className:"navbar-option",to:"/login",children:"Log in"}),e.user&&Object(d.jsxs)("div",{className:"in-out-wrapper",children:[Object(d.jsx)("div",{className:"navbar-option-unclick",children:"Welcome ".concat(e.user)}),Object(d.jsx)("div",{className:"navbar-option",onClick:function(){u.a.auth().signOut().then((function(){console.log("Sign-out successful"),e.setUser(""),t.push("/login")})).catch((function(e){}))},children:"Log out"})]})]}),Object(d.jsx)("div",{children:!e.user&&Object(d.jsx)(o.b,{className:"navbar-option",to:"/signup",children:"Sign up"})})]})]})})};var p=function(){var e=Object(a.useContext)(j),t=Object(l.g)(),s=Object(a.useState)(),c=Object(r.a)(s,2),i=c[0],n=c[1],o=Object(a.useState)(),b=Object(r.a)(o,2),p=(b[0],b[1],Object(a.useState)()),O=Object(r.a)(p,2),m=O[0],f=O[1],h=Object(a.useState)(),v=Object(r.a)(h,2),x=v[0],g=v[1],N=Object(a.useState)(),w=Object(r.a)(N,2),U=w[0],C=w[1];u.a.auth().onAuthStateChanged((function(s){s?n(s.email):t.push("/login"),null!==s&&(e.setLoginUserDisplayName(s.displayName),e.setLoginUserId(s.uid),e.setUser(s.displayName))}));var I=function(t){e.setUserInput(t.target.value),e.setUserInputFilled(!0)};return U||u.a.storage().ref().child(e.loginUserId+"/profilePic").getDownloadURL().then((function(e){C(e)})),Object(d.jsxs)("div",{className:"profile-wrapper",children:[Object(d.jsx)("div",{className:"profile-left"}),Object(d.jsxs)("div",{className:"profile-container",children:[Object(d.jsxs)("div",{className:"img-cropper",children:[U&&Object(d.jsx)("img",{className:"profile-img",src:U,alt:"Profile Picture"}),!U&&Object(d.jsx)("img",{className:"profile-img",src:"/blank-profile.svg",alt:"Profile Picture"})]}),Object(d.jsx)("div",{className:"profile-title",children:"Profile"}),Object(d.jsx)("div",{className:"profile-subtitle",children:"User Name"}),!e.loginUserDisplayName&&Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"profile-input",type:"text",onChange:I,placeholder:"Create a username"})}),e.loginUserDisplayName&&Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"profile-input",type:"text",onChange:I,placeholder:e.loginUserDisplayName})}),Object(d.jsx)("div",{className:"profile-subtitle",children:"Email"}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"profile-input",type:"text",value:i})}),Object(d.jsx)("div",{className:"profile-subtitle",children:"Upload Profile's picture"}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{type:"file",id:"myFile",name:"filename",onChange:function(t){var s=t.target.files[0];g(s),console.log(s.name),f(s.name),e.setUserInputFilled(!0)}})}),Object(d.jsx)("div",{className:"profile-button-cotainer",children:Object(d.jsx)("button",{disabled:!e.userInputFilled,className:"submit-button-".concat(!e.userInputFilled),onClick:function(){u.a.auth().currentUser.updateProfile({displayName:e.userInput,photoURL:e.loginUserId+"/profilePicture/"+m}).then((function(){console.log("Update successful"),e.userInput&&e.setUser(e.userInput)})).catch((function(e){}));u.a.storage().ref(e.loginUserId+"/profilePic").put(x);e.setUserInputFilled(!1),t.push("/")},children:"Save"})})]}),Object(d.jsx)("div",{className:"profile-right"})]})},O=s(40),m=s(26);var f=function(){Object(a.useContext)(j);var e=Object(a.useState)({}),t=Object(r.a)(e,2),s=t[0],c=t[1],i=Object(a.useState)(!1),n=Object(r.a)(i,2),o=n[0],b=n[1],p=Object(a.useState)(!1),f=Object(r.a)(p,2),h=f[0],v=f[1],x=Object(l.g)(),g=function(e){v(!0);var t=e.target.name,a=e.target.value;c(Object(m.a)(Object(m.a)({},s),{},Object(O.a)({},t,a)))};return Object(a.useEffect)((function(){s.email&&s.password&&s.confirmPassword&&s.password===s.confirmPassword?b(!0):b(!1)}),[s]),Object(a.useEffect)((function(){s.password===s.confirmPassword&&s.password&&s.confirmPassword?v(!1):v(!0)}),[s]),Object(d.jsxs)("div",{className:"profile-wrapper",children:[Object(d.jsx)("div",{className:"profile-left"}),Object(d.jsxs)("div",{className:"profile-container",children:[Object(d.jsx)("div",{className:"profile-title",children:"Sign up"}),Object(d.jsx)("div",{className:"profile-subtitle",children:"Email"}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"profile-input",type:"text",name:"email",onChange:function(e){var t=e.target.name,a=e.target.value;c(Object(m.a)(Object(m.a)({},s),{},Object(O.a)({},t,a)))}})}),Object(d.jsx)("div",{className:"profile-subtitle",children:"Password"}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"profile-input",type:"password",name:"password",onChange:g})}),Object(d.jsx)("div",{className:"profile-subtitle",children:"Confirm Password"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("input",{className:"profile-input",type:"password",name:"confirmPassword",onChange:g})," "]}),Object(d.jsxs)("div",{className:"signup-button-cotainer",children:[Object(d.jsx)("button",{disabled:!o,className:"submit-button-".concat(!o),onClick:function(){u.a.auth().createUserWithEmailAndPassword(s.email,s.password).then((function(e){e.user})).catch((function(e){e.code,e.message}));var e=u.a.auth().currentUser;if(null!==e){e.displayName,e.email,e.photoURL,e.emailVerified,e.uid;x.push("/profile")}else x.push("/login");x.push("/profile")},children:"Sign up"}),h&&Object(d.jsx)("div",{className:"singup-error-".concat(h),children:"Passwords must match"})]})]}),Object(d.jsx)("div",{className:"signup-right"})]})};var h=function(){var e=Object(a.useContext)(j),t=Object(l.g)(),s=Object(a.useState)({}),c=Object(r.a)(s,2),i=c[0],n=c[1],o=Object(a.useState)(!1),b=Object(r.a)(o,2),p=b[0],f=b[1];return Object(a.useEffect)((function(){i.email&&i.password?f(!0):f(!1)}),[i]),Object(d.jsxs)("div",{className:"profile-wrapper",children:[Object(d.jsx)("div",{className:"profile-left"}),Object(d.jsxs)("div",{className:"profile-container",children:[Object(d.jsx)("div",{className:"profile-title",children:"Log in"}),Object(d.jsx)("div",{className:"profile-subtitle",children:"Email"}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"profile-input",type:"text",name:"email",onChange:function(e){var t=e.target.name,s=e.target.value;n(Object(m.a)(Object(m.a)({},i),{},Object(O.a)({},t,s)))}})}),Object(d.jsx)("div",{className:"profile-subtitle",children:"Password"}),Object(d.jsx)("div",{children:Object(d.jsx)("input",{className:"profile-input",type:"password",name:"password",onChange:function(e){var t=e.target.name,s=e.target.value;n(Object(m.a)(Object(m.a)({},i),{},Object(O.a)({},t,s)))}})}),Object(d.jsx)("div",{className:"profile-button-cotainer",children:Object(d.jsx)("button",{disabled:!p,className:"submit-button-".concat(!p),onClick:function(){u.a.auth().signInWithEmailAndPassword(i.email,i.password).then((function(s){var a=s.user;u.a.database().ref().child("users").child(a.uid).get().then((function(s){s?(e.setUser(a.displayName),t.push("/")):console.log("No data available")})).catch((function(e){console.error(e)}))})).catch((function(e){var t=e.code,s=e.message;console.log(t,s)}))},children:"Log in"})})]}),Object(d.jsx)("div",{className:"profile-right"})]})};s(175);s(107);var v=function(){Object(a.useContext)(j);var e=Object(a.useState)([]),t=Object(r.a)(e,2),s=t[0],c=t[1];Object(a.useEffect)((function(){u.a.database().ref().child("tweets").get().then((function(e){e.exists()?c(Object.values(e.val())):console.log("No data available")})).catch((function(e){console.error(e)}))}));var i=s.sort((function(e,t){return new Date(t.date)-new Date(e.date)}));return Object(d.jsx)("div",{className:"list",children:i.map((function(e){return Object(d.jsxs)("div",{className:"list_item",children:[Object(d.jsxs)("div",{className:"list-item-data",children:[Object(d.jsx)("div",{children:e.userName}),Object(d.jsx)("div",{children:e.date})]}),Object(d.jsx)("div",{className:"list-item-tweet",children:e.content})]},e.id)}))})},x=s(174),g=s(315);s(313);var N=function(){var e=Object(a.useContext)(j),t=u.a.auth().currentUser;if(null!==t)t.displayName,t.email,t.photoURL,t.emailVerified,t.uid;return Object(d.jsxs)("div",{className:"form-wrapper",children:[Object(d.jsx)("textarea",{className:"tweet-form",onChange:function(t){var s=140-t.target.value.length;e.setCarsLeft(s),e.setNoteInput(t.target.value)},type:"text",placeholder:"What you have in mind...",value:e.noteInput}),Object(d.jsxs)("div",{className:"tweet-bottom",children:[Object(d.jsx)("div",{children:Object(d.jsx)("div",{className:"tweet-error-".concat(e.alert),children:"The tweet can't contain more then 140 chars."})}),Object(d.jsx)("div",{children:" "}),Object(d.jsxs)("div",{className:"tweet-button",children:[Object(d.jsx)("img",{className:"loading-".concat(e.loadingActive),src:"/loadingLogo.svg",alt:"loading"}),Object(d.jsx)("button",{disabled:!e.isFormComplete,className:"submit-button-".concat(!e.isFormComplete," tweet"),onClick:function(){e.setIsFormComplete(!1),e.setLoadingActive(!0),setTimeout((function(){if(e.carsLeft>0){var t=e.formData;t.date=Object(g.a)(new Date,"dd-MM-yyyy HH:mm:ss"),e.setNotesArray((function(e){return[t].concat(Object(x.a)(e))})),e.setNoteInput(""),e.setFormData({});var s=u.a.auth().currentUser;if(null!==s){s.displayName,s.email,s.photoURL,s.emailVerified,s.uid;u.a.database().ref("tweets/"+s.uid+"_"+new Date).set(t)}e.setLoadingActive(!1)}}),500)},children:"Tweet"})]})]})]})};var w=function(){var e=Object(a.useContext)(j),t=Object(l.g)(),s=Object(l.h)(),c=u.a.auth().currentUser;if(null!==c)c.displayName,c.email,c.photoURL,c.emailVerified,c.uid;else t.push("/login");return Object(a.useEffect)((function(){e.user||(s.pathname.includes("signup")||e.setRedirect("/login"))}),[e.user,s]),Object(a.useEffect)((function(){e.carsLeft<0?(e.setIsFormComplete(!1),e.setAlert(!0)):e.formData&&e.formData.content?(e.setIsFormComplete(!0),e.setAlert(!1)):(e.setIsFormComplete(!1),e.setAlert(!1))})),Object(a.useEffect)((function(){var t={content:e.noteInput,userName:e.user};e.setFormData(t)}),[e.noteInput]),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(N,{}),Object(d.jsx)(v,{})]})};var U=function(){var e=Object(a.useState)(),t=Object(r.a)(e,2),s=t[0],c=t[1],i=Object(a.useState)(),n=Object(r.a)(i,2),u=n[0],O=n[1],m=Object(a.useState)(),v=Object(r.a)(m,2),x=v[0],g=v[1],N=Object(a.useState)([]),U=Object(r.a)(N,2),C=U[0],I=U[1],y=Object(a.useState)(!1),S=Object(r.a)(y,2),F=S[0],L=S[1],P=Object(a.useState)(140),D=Object(r.a)(P,2),A=D[0],E=D[1],k=Object(a.useState)(!1),T=Object(r.a)(k,2),R=T[0],B=T[1],V=Object(a.useState)(!1),W=Object(r.a)(V,2),H=W[0],M=W[1],z=Object(a.useState)(),J=Object(r.a)(z,2),_=J[0],q=J[1],G=Object(a.useState)(!1),K=Object(r.a)(G,2),Q=K[0],Z=K[1],X=Object(a.useState)([]),Y=Object(r.a)(X,2),$=Y[0],ee=Y[1],te=Object(a.useState)(),se=Object(r.a)(te,2),ae=se[0],ce=se[1],ie=Object(a.useState)(),ne=Object(r.a)(ie,2),re=ne[0],le=ne[1],oe=Object(a.useState)(),je=Object(r.a)(oe,2),ue=je[0],de=je[1],be=Object(a.useState)(),pe=Object(r.a)(be,2),Oe=pe[0],me=pe[1];return Object(d.jsx)(j.Provider,{value:{user:s,setUser:c,noteInput:u,setNoteInput:O,formData:x,setFormData:g,notesArray:C,setNotesArray:I,isFormComplete:F,setIsFormComplete:L,carsLeft:A,setCarsLeft:E,alert:R,setAlert:B,loadingActive:H,setLoadingActive:M,userInput:_,setUserInput:q,userInputFilled:Q,setUserInputFilled:Z,tweetsDB:$,setTweetsDB:ee,redirect:ae,setRedirect:ce,setLoginUser:le,loginUser:re,loginUserId:Oe,setLoginUserId:me,loginUserDisplayName:ue,setLoginUserDisplayName:de},children:Object(d.jsx)(o.a,{children:Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{children:Object(d.jsx)(b,{})}),Object(d.jsx)("div",{children:Object(d.jsxs)(l.d,{children:[Object(d.jsx)(l.b,{exact:!0,path:"/",children:Object(d.jsx)(w,{})}),Object(d.jsx)(l.b,{path:"/profile",children:Object(d.jsx)(p,{})}),Object(d.jsx)(l.b,{path:"/login",children:Object(d.jsx)(h,{})}),Object(d.jsx)(l.b,{path:"/signup",children:Object(d.jsx)(f,{})})]})})]})})})},C=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,316)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,n=t.getTTFB;s(e),a(e),c(e),i(e),n(e)}))};n.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(U,{})}),document.getElementById("root")),C()},41:function(e,t,s){}},[[312,1,2]]]);
//# sourceMappingURL=main.cfd04713.chunk.js.map