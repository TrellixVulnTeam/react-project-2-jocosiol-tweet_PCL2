{"ast":null,"code":"var _jsxFileName = \"/Users/javiercosio/Documents/ITC/tweet-react-project/src/components/Form.js\",\n    _s = $RefreshSig$();\n\nimport { useContext } from \"react\";\nimport \"../App.css\";\nimport { formatISO } from \"date-fns\";\nimport AppContext from \"../context/AppContext\";\nimport firebase from \"../lib/firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Form() {\n  _s();\n\n  const appContext = useContext(AppContext);\n\n  const handleChangeNote = e => {\n    const charCount = e.target.value.length;\n    let charLeft = 140 - charCount;\n    appContext.setCarsLeft(charLeft);\n    appContext.setNoteInput(e.target.value);\n  };\n\n  const handleSubmit = () => {\n    appContext.setIsFormComplete(false);\n    appContext.setLoadingActive(true);\n    setTimeout(() => {\n      if (appContext.carsLeft > 0) {\n        const finalData = appContext.formData;\n        finalData[\"date\"] = formatISO(new Date(), \"dd-MM-yyyy HH:mm:ss\");\n        appContext.setNotesArray(prevState => {\n          return [finalData, ...prevState];\n        });\n        appContext.setNoteInput(\"\");\n        appContext.setFormData({});\n        const userLogin = firebase.auth().currentUser;\n\n        if (userLogin !== null) {\n          firebase.database().ref(\"tweets/\" + userLogin.uid + \"_\" + new Date()).set(finalData);\n        } // axios.post('https://micro-blogging-dot-full-stack-course-services.ew.r.appspot.com/tweet', finalData)\n        // .then(res => {\n        //   console.log(res);\n        // })\n        // .catch(err => {\n        //   console.error(err);\n        // })\n        // localStorage.setItem(finalData[\"id\"], JSON.stringify(finalData));\n\n\n        appContext.setLoadingActive(false);\n      }\n    }, 500);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n      className: \"tweet-form\",\n      onChange: handleChangeNote,\n      type: \"text\",\n      placeholder: \"What you have in mind...\",\n      value: appContext.noteInput\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tweet-bottom\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `tweet-error-${appContext.alert}`,\n          children: \"The tweet can't contain more then 140 chars.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \" \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tweet-button\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: `loading-${appContext.loadingActive}`,\n          src: \"/loadingLogo.svg\",\n          alt: \"loading\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: !appContext.isFormComplete,\n          className: `submit-button-${!appContext.isFormComplete} tweet`,\n          onClick: handleSubmit,\n          children: \"Tweet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Form, \"HGTTxa8uH4YBXqL2qR+kdbnGM4U=\");\n\n_c = Form;\nexport default Form;\n\nvar _c;\n\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"sources":["/Users/javiercosio/Documents/ITC/tweet-react-project/src/components/Form.js"],"names":["useContext","formatISO","AppContext","firebase","Form","appContext","handleChangeNote","e","charCount","target","value","length","charLeft","setCarsLeft","setNoteInput","handleSubmit","setIsFormComplete","setLoadingActive","setTimeout","carsLeft","finalData","formData","Date","setNotesArray","prevState","setFormData","userLogin","auth","currentUser","database","ref","uid","set","noteInput","alert","loadingActive","isFormComplete"],"mappings":"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","sourcesContent":["import { useContext } from \"react\";\nimport \"../App.css\";\nimport { formatISO } from \"date-fns\";\nimport AppContext from \"../context/AppContext\";\nimport firebase from \"../lib/firebase\";\n\n\n\nfunction Form() {\n  const appContext = useContext(AppContext);\n\n  const handleChangeNote = (e) => {\n    const charCount = e.target.value.length;\n    let charLeft = 140 - charCount;\n    appContext.setCarsLeft(charLeft);\n    appContext.setNoteInput(e.target.value);\n  };\n\n\n  const handleSubmit = () => {\n    appContext.setIsFormComplete(false);\n    appContext.setLoadingActive(true);\n    setTimeout(() => {\n      if (appContext.carsLeft > 0) {\n        const finalData = appContext.formData;\n\n        finalData[\"date\"] = formatISO(new Date(), \"dd-MM-yyyy HH:mm:ss\");\n\n        appContext.setNotesArray((prevState) => {\n          return [finalData, ...prevState];\n        });\n\n        appContext.setNoteInput(\"\");\n        appContext.setFormData({});\n\n\n        const userLogin = firebase.auth().currentUser;\n        if (userLogin !== null) {\n          \n\n        \n\n          firebase\n          .database()\n          .ref(\"tweets/\" + userLogin.uid +\"_\"+ new Date())\n          .set(finalData);\n        }\n\n        // axios.post('https://micro-blogging-dot-full-stack-course-services.ew.r.appspot.com/tweet', finalData)\n        // .then(res => {\n        //   console.log(res);\n        // })\n        // .catch(err => {\n        //   console.error(err);\n        // })\n\n        // localStorage.setItem(finalData[\"id\"], JSON.stringify(finalData));\n        appContext.setLoadingActive(false);\n      }\n    }, 500);\n  };\n\n  return (\n    <div className=\"form-wrapper\">\n      <textarea\n        className=\"tweet-form\"\n        onChange={handleChangeNote}\n        type=\"text\"\n        placeholder=\"What you have in mind...\"\n        value={appContext.noteInput}\n      />\n      <div className=\"tweet-bottom\">\n        <div>\n          <div className={`tweet-error-${appContext.alert}`}>\n            The tweet can't contain more then 140 chars.\n          </div>\n        </div>\n        <div> </div>\n        <div className=\"tweet-button\">\n          <img\n            className={`loading-${appContext.loadingActive}`}\n            src=\"/loadingLogo.svg\"\n            alt=\"loading\"\n          ></img>\n          <button\n            disabled={!appContext.isFormComplete}\n            className={`submit-button-${!appContext.isFormComplete} tweet`}\n            onClick={handleSubmit}\n          >\n            Tweet\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}