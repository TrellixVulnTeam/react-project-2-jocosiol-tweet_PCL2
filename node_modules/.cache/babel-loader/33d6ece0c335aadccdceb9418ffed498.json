{"ast":null,"code":"var _jsxFileName = \"/Users/javiercosio/Documents/ITC/tweet-react-project/src/components/Login.js\",\n    _s = $RefreshSig$();\n\nimport \"../App.css\";\nimport { useHistory } from \"react-router-dom\";\nimport AppContext from \"../context/AppContext\";\nimport { useContext, useState, useEffect } from \"react\";\nimport firebase from \"../lib/firebase\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Login() {\n  _s();\n\n  const appContext = useContext(AppContext);\n  const history = useHistory();\n  const [formData, setFormData] = useState({});\n  const [isFormComplete, setIsFormComplete] = useState(false);\n\n  const handleChangeUserLogin = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setFormData({ ...formData,\n      [name]: value\n    });\n  };\n\n  const handleChangePassLogin = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setFormData({ ...formData,\n      [name]: value\n    });\n  }; // useEffect(() => {\n  //   console.log(formData);\n  // }, [formData]);\n\n\n  useEffect(() => {\n    if (formData.email && formData.password) {\n      setIsFormComplete(true);\n    } else {\n      setIsFormComplete(false);\n    }\n  }, [formData]);\n\n  const handleLoginSubmit = () => {\n    firebase.auth().signInWithEmailAndPassword(formData.email, formData.password).then(userCredential => {\n      // Signed in\n      const user = userCredential.user;\n      const dbRef = firebase.database().ref();\n      dbRef.child(\"users\").child(user.uid).get().then(snapshot => {\n        if (snapshot) {\n          //console.log(user);\n          //console.log(snapshot.val());\n          //appContext.setUser(snapshot.val().username);\n          //appContext.setUser(user);\n          //setRedirect(\"/\");\n          history.push(\"/\");\n        } else {\n          console.log(\"No data available\");\n        }\n      }).catch(error => {\n        console.error(error);\n      }); // ...\n    }).catch(error => {\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      console.log(errorCode, errorMessage);\n    }); //appContext.setUserInputFilled(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-left\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-title\",\n        children: \"Log in\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-subtitle\",\n        children: \"Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"profile-input\",\n          type: \"text\",\n          name: `email`,\n          onChange: handleChangeUserLogin\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-subtitle\",\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"profile-input\",\n          type: \"password\",\n          name: `password`,\n          onChange: handleChangePassLogin\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-button-cotainer\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: !isFormComplete,\n          className: `submit-button-${!isFormComplete}`,\n          onClick: handleLoginSubmit,\n          children: \"Log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-right\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"LgqHVq4HxeMXIikKOaexDCtsNAI=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/javiercosio/Documents/ITC/tweet-react-project/src/components/Login.js"],"names":["useHistory","AppContext","useContext","useState","useEffect","firebase","Login","appContext","history","formData","setFormData","isFormComplete","setIsFormComplete","handleChangeUserLogin","e","name","target","value","handleChangePassLogin","email","password","handleLoginSubmit","auth","signInWithEmailAndPassword","then","userCredential","user","dbRef","database","ref","child","uid","get","snapshot","push","console","log","catch","error","errorCode","code","errorMessage","message"],"mappings":"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","sourcesContent":["import \"../App.css\";\nimport { useHistory } from \"react-router-dom\";\nimport AppContext from \"../context/AppContext\";\nimport { useContext, useState, useEffect } from \"react\";\nimport firebase from \"../lib/firebase\";\n\nfunction Login() {\n  const appContext = useContext(AppContext);\n  const history = useHistory();\n  const [formData, setFormData] = useState({});\n  const [isFormComplete, setIsFormComplete] = useState(false);\n\n  const handleChangeUserLogin = (e) => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const handleChangePassLogin = (e) => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  // useEffect(() => {\n  //   console.log(formData);\n  // }, [formData]);\n\n  useEffect(() => {\n    if (formData.email && formData.password) {\n      setIsFormComplete(true);\n    } else {\n      setIsFormComplete(false);\n    }\n  }, [formData]);\n\n  const handleLoginSubmit = () => {\n    firebase\n      .auth()\n      .signInWithEmailAndPassword(formData.email, formData.password)\n      .then((userCredential) => {\n        // Signed in\n        const user = userCredential.user;\n        const dbRef = firebase.database().ref();\n        dbRef\n          .child(\"users\")\n          .child(user.uid)\n          .get()\n          .then((snapshot) => {\n            if (snapshot) {\n              //console.log(user);\n              //console.log(snapshot.val());\n              //appContext.setUser(snapshot.val().username);\n              //appContext.setUser(user);\n              //setRedirect(\"/\");\n              history.push(\"/\");\n            } else {\n              console.log(\"No data available\");\n            }\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n        // ...\n      })\n      .catch((error) => {\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        console.log(errorCode, errorMessage);\n      });\n\n    //appContext.setUserInputFilled(false);\n  };\n\n  return (\n    <div className=\"profile-wrapper\">\n      <div className=\"profile-left\"></div>\n      <div className=\"profile-container\">\n        <div className=\"profile-title\">Log in</div>\n        <div className=\"profile-subtitle\">Email</div>\n        <div>\n          <input\n            className=\"profile-input\"\n            type=\"text\"\n            name={`email`}\n            onChange={handleChangeUserLogin}\n          />\n        </div>\n        <div className=\"profile-subtitle\">Password</div>\n        <div>\n          <input\n            className=\"profile-input\"\n            type=\"password\"\n            name={`password`}\n            onChange={handleChangePassLogin}\n          />\n        </div>\n        <div className=\"profile-button-cotainer\">\n          <button\n            disabled={!isFormComplete}\n            className={`submit-button-${!isFormComplete}`}\n            onClick={handleLoginSubmit}\n          >\n            Log in\n          </button>\n        </div>\n      </div>\n      <div className=\"profile-right\"></div>\n    </div>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}