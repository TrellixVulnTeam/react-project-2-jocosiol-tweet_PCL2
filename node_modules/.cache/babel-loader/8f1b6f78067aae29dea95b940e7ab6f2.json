{"ast":null,"code":"import _toConsumableArray from\"/Users/javiercosio/Documents/ITC/tweet-react-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import{useContext,useEffect}from\"react\";import\"../App.css\";import{formatISO}from\"date-fns\";import axios from\"axios\";import AppContext from\"../context/AppContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Form(){var appContext=useContext(AppContext);var handleChangeNote=function handleChangeNote(e){var charCount=e.target.value.length;var charLeft=140-charCount;appContext.setCarsLeft(charLeft);appContext.setNoteInput(e.target.value);};useEffect(function(){console.log(appContext.carsLeft);},[appContext.carsLeft]);var handleSubmit=function handleSubmit(){appContext.setIsFormComplete(false);appContext.setLoadingActive(true);setTimeout(function(){if(appContext.carsLeft>0){var finalData=appContext.formData;finalData[\"date\"]=formatISO(new Date(),\"dd-MM-yyyy HH:mm:ss\");appContext.setNotesArray(function(prevState){return[finalData].concat(_toConsumableArray(prevState));});appContext.setNoteInput(\"\");appContext.setFormData({});console.log(finalData);axios.post('https://micro-blogging-dot-full-stack-course-services.ew.r.appspot.com/tweet',finalData).then(function(res){console.log(res);}).catch(function(err){console.error(err);});// localStorage.setItem(finalData[\"id\"], JSON.stringify(finalData));\nappContext.setLoadingActive(false);}},500);};return/*#__PURE__*/_jsxs(\"div\",{className:\"form-wrapper\",children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"tweet-form\",onChange:handleChangeNote,type:\"text\",placeholder:\"What you have in mind...\",value:appContext.noteInput}),/*#__PURE__*/_jsxs(\"div\",{className:\"tweet-bottom\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"tweet-error-\".concat(appContext.alert),children:\"The tweet can't contain more then 140 chars.\"})}),/*#__PURE__*/_jsx(\"div\",{children:\"  \"}),/*#__PURE__*/_jsxs(\"div\",{className:\"tweet-button\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"loading-\".concat(appContext.loadingActive),src:\"/loadingLogo.svg\",alt:\"loading\"}),/*#__PURE__*/_jsx(\"button\",{disabled:!appContext.isFormComplete,className:\"submit-button-\".concat(!appContext.isFormComplete,\" tweet\"),onClick:handleSubmit,children:\"Tweet\"})]})]})]});}export default Form;","map":{"version":3,"sources":["/Users/javiercosio/Documents/ITC/tweet-react-project/src/components/Form.js"],"names":["useContext","useEffect","formatISO","axios","AppContext","Form","appContext","handleChangeNote","e","charCount","target","value","length","charLeft","setCarsLeft","setNoteInput","console","log","carsLeft","handleSubmit","setIsFormComplete","setLoadingActive","setTimeout","finalData","formData","Date","setNotesArray","prevState","setFormData","post","then","res","catch","err","error","noteInput","alert","loadingActive","isFormComplete"],"mappings":"mLAAA,OAASA,UAAT,CAAqBC,SAArB,KAAsC,OAAtC,CACA,MAAO,YAAP,CACA,OAASC,SAAT,KAA0B,UAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,UAAP,KAAuB,uBAAvB,C,wFAGA,QAASC,CAAAA,IAAT,EAAgB,CACd,GAAMC,CAAAA,UAAU,CAAGN,UAAU,CAACI,UAAD,CAA7B,CAGA,GAAMG,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACC,CAAD,CAAO,CAC9B,GAAMC,CAAAA,SAAS,CAAGD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAeC,MAAjC,CACA,GAAIC,CAAAA,QAAQ,CAAG,IAAMJ,SAArB,CACAH,UAAU,CAACQ,WAAX,CAAuBD,QAAvB,EACAP,UAAU,CAACS,YAAX,CAAwBP,CAAC,CAACE,MAAF,CAASC,KAAjC,EACD,CALD,CAOAV,SAAS,CAAC,UAAM,CACde,OAAO,CAACC,GAAR,CAAYX,UAAU,CAACY,QAAvB,EACD,CAFQ,CAEN,CAACZ,UAAU,CAACY,QAAZ,CAFM,CAAT,CAIA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CAEzBb,UAAU,CAACc,iBAAX,CAA6B,KAA7B,EACAd,UAAU,CAACe,gBAAX,CAA4B,IAA5B,EACAC,UAAU,CAAC,UAAM,CACf,GAAIhB,UAAU,CAACY,QAAX,CAAsB,CAA1B,CAA6B,CAC3B,GAAMK,CAAAA,SAAS,CAAGjB,UAAU,CAACkB,QAA7B,CAEAD,SAAS,CAAC,MAAD,CAAT,CAAoBrB,SAAS,CAAC,GAAIuB,CAAAA,IAAJ,EAAD,CAAa,qBAAb,CAA7B,CAGAnB,UAAU,CAACoB,aAAX,CAAyB,SAACC,SAAD,CAAe,CACtC,OAAQJ,SAAR,4BAAsBI,SAAtB,GACD,CAFD,EAIArB,UAAU,CAACS,YAAX,CAAwB,EAAxB,EACAT,UAAU,CAACsB,WAAX,CAAuB,EAAvB,EAIAZ,OAAO,CAACC,GAAR,CAAYM,SAAZ,EAEApB,KAAK,CAAC0B,IAAN,CAAW,8EAAX,CAA2FN,SAA3F,EACCO,IADD,CACM,SAAAC,GAAG,CAAI,CACXf,OAAO,CAACC,GAAR,CAAYc,GAAZ,EACD,CAHD,EAICC,KAJD,CAIO,SAAAC,GAAG,CAAI,CACZjB,OAAO,CAACkB,KAAR,CAAcD,GAAd,EACD,CAND,EAQA;AACA3B,UAAU,CAACe,gBAAX,CAA4B,KAA5B,EACD,CACF,CA7BS,CA6BP,GA7BO,CAAV,CA+BD,CAnCD,CAqCA,mBACE,aAAK,SAAS,CAAC,cAAf,wBACE,iBACE,SAAS,CAAC,YADZ,CAEE,QAAQ,CAAEd,gBAFZ,CAGE,IAAI,CAAC,MAHP,CAIE,WAAW,CAAC,0BAJd,CAKE,KAAK,CAAED,UAAU,CAAC6B,SALpB,EADF,cAQE,aAAK,SAAS,CAAC,cAAf,wBACE,kCACE,YAAK,SAAS,uBAAiB7B,UAAU,CAAC8B,KAA5B,CAAd,0DADF,EADF,cAME,2BANF,cAOE,aAAK,SAAS,CAAC,cAAf,wBACA,YAAK,SAAS,mBAAa9B,UAAU,CAAC+B,aAAxB,CAAd,CAAuD,GAAG,CAAC,kBAA3D,CAA8E,GAAG,CAAC,SAAlF,EADA,cAEE,eACE,QAAQ,CAAE,CAAC/B,UAAU,CAACgC,cADxB,CAEE,SAAS,yBAAmB,CAAChC,UAAU,CAACgC,cAA/B,UAFX,CAGE,OAAO,CAAEnB,YAHX,mBAFF,GAPF,GARF,GADF,CA6BD,CAED,cAAed,CAAAA,IAAf","sourcesContent":["import { useContext, useEffect } from \"react\";\nimport \"../App.css\";\nimport { formatISO } from \"date-fns\";\nimport axios from \"axios\";\nimport AppContext from \"../context/AppContext\";\n\n\nfunction Form() {\n  const appContext = useContext(AppContext);\n\n\n  const handleChangeNote = (e) => {\n    const charCount = e.target.value.length;\n    let charLeft = 140 - charCount;\n    appContext.setCarsLeft(charLeft);\n    appContext.setNoteInput(e.target.value);\n  };\n\n  useEffect(() => {\n    console.log(appContext.carsLeft);\n  }, [appContext.carsLeft]);\n\n  const handleSubmit = () => {\n    \n    appContext.setIsFormComplete(false);\n    appContext.setLoadingActive(true);\n    setTimeout(() => {\n      if (appContext.carsLeft > 0) {\n        const finalData = appContext.formData;\n\n        finalData[\"date\"] = formatISO(new Date(), \"dd-MM-yyyy HH:mm:ss\");\n\n\n        appContext.setNotesArray((prevState) => {\n          return [finalData, ...prevState];\n        });\n\n        appContext.setNoteInput(\"\");\n        appContext.setFormData({});\n\n\n\n        console.log(finalData);\n\n        axios.post('https://micro-blogging-dot-full-stack-course-services.ew.r.appspot.com/tweet', finalData)\n        .then(res => {\n          console.log(res);\n        })\n        .catch(err => {\n          console.error(err);\n        })\n\n        // localStorage.setItem(finalData[\"id\"], JSON.stringify(finalData));\n        appContext.setLoadingActive(false);\n      }\n    }, 500);\n  \n  };\n\n  return (\n    <div className=\"form-wrapper\">\n      <textarea\n        className=\"tweet-form\"\n        onChange={handleChangeNote}\n        type=\"text\"\n        placeholder=\"What you have in mind...\"\n        value={appContext.noteInput}\n      />\n      <div className=\"tweet-bottom\">\n        <div>\n          <div className={`tweet-error-${appContext.alert}`}>\n            The tweet can't contain more then 140 chars.\n          </div>\n        </div>\n        <div>  </div>\n        <div className=\"tweet-button\">\n        <img className={`loading-${appContext.loadingActive}`} src='/loadingLogo.svg' alt=\"loading\"></img>\n          <button\n            disabled={!appContext.isFormComplete}\n            className={`submit-button-${!appContext.isFormComplete} tweet`}\n            onClick={handleSubmit}\n          >\n            Tweet\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}