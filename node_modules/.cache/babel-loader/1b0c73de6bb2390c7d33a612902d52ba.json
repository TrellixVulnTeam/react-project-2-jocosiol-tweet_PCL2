{"ast":null,"code":"var _jsxFileName = \"/Users/javiercosio/Documents/ITC/tweet-react-project/src/components/Form.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect } from \"react\";\nimport \"../App.css\";\nimport { formatISO } from \"date-fns\";\nimport axios from \"axios\";\nimport AppContext from \"../context/AppContext\";\nimport firebase from \"../lib/firebase\";\nimport cryptoRandomString from 'crypto-random-string';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Form() {\n  _s();\n\n  const appContext = useContext(AppContext);\n  const userLogin = firebase.auth().currentUser;\n\n  if (userLogin !== null) {\n    // The userLogin object has basic properties such as display name, email, etc.\n    const displayName = userLogin.displayName;\n    const email = userLogin.email;\n    const photoURL = userLogin.photoURL;\n    const emailVerified = userLogin.emailVerified; // The user's ID, unique to the Firebase project. Do NOT use\n    // this value to authenticate with your backend server, if\n    // you have one. Use User.getToken() instead.\n\n    const uid = userLogin.uid;\n  }\n\n  const handleChangeNote = e => {\n    const charCount = e.target.value.length;\n    let charLeft = 140 - charCount;\n    appContext.setCarsLeft(charLeft);\n    appContext.setNoteInput(e.target.value);\n  };\n\n  useEffect(() => {\n    console.log(appContext.carsLeft);\n  }, [appContext.carsLeft]);\n\n  const handleSubmit = () => {\n    appContext.setIsFormComplete(false);\n    appContext.setLoadingActive(true);\n    setTimeout(() => {\n      if (appContext.carsLeft > 0) {\n        const finalData = appContext.formData;\n        finalData[\"date\"] = formatISO(new Date(), \"dd-MM-yyyy HH:mm:ss\");\n        appContext.setNotesArray(prevState => {\n          return [finalData, ...prevState];\n        });\n        appContext.setNoteInput(\"\");\n        appContext.setFormData({});\n        console.log(finalData);\n        const userLogin = firebase.auth().currentUser;\n\n        if (userLogin !== null) {\n          // The userLogin object has basic properties such as display name, email, etc.\n          const displayName = userLogin.displayName;\n          const email = userLogin.email;\n          const photoURL = userLogin.photoURL;\n          const emailVerified = userLogin.emailVerified; // The user's ID, unique to the Firebase project. Do NOT use\n          // this value to authenticate with your backend server, if\n          // you have one. Use User.getToken() instead.\n\n          const uid = userLogin.uid;\n          firebase.database().ref(\"users/\" + userLogin.uid + \"-\" + new Date()).set(finalData);\n        } // axios.post('https://micro-blogging-dot-full-stack-course-services.ew.r.appspot.com/tweet', finalData)\n        // .then(res => {\n        //   console.log(res);\n        // })\n        // .catch(err => {\n        //   console.error(err);\n        // })\n        // localStorage.setItem(finalData[\"id\"], JSON.stringify(finalData));\n\n\n        appContext.setLoadingActive(false);\n      }\n    }, 500);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n      className: \"tweet-form\",\n      onChange: handleChangeNote,\n      type: \"text\",\n      placeholder: \"What you have in mind...\",\n      value: appContext.noteInput\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tweet-bottom\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `tweet-error-${appContext.alert}`,\n          children: \"The tweet can't contain more then 140 chars.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \" \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tweet-button\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: `loading-${appContext.loadingActive}`,\n          src: \"/loadingLogo.svg\",\n          alt: \"loading\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          disabled: !appContext.isFormComplete,\n          className: `submit-button-${!appContext.isFormComplete} tweet`,\n          onClick: handleSubmit,\n          children: \"Tweet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Form, \"IRqG/3f4wGXHjd+ycNbawawQkFE=\");\n\n_c = Form;\nexport default Form;\n\nvar _c;\n\n$RefreshReg$(_c, \"Form\");","map":{"version":3,"sources":["/Users/javiercosio/Documents/ITC/tweet-react-project/src/components/Form.js"],"names":["useContext","useEffect","formatISO","axios","AppContext","firebase","cryptoRandomString","Form","appContext","userLogin","auth","currentUser","displayName","email","photoURL","emailVerified","uid","handleChangeNote","e","charCount","target","value","length","charLeft","setCarsLeft","setNoteInput","console","log","carsLeft","handleSubmit","setIsFormComplete","setLoadingActive","setTimeout","finalData","formData","Date","setNotesArray","prevState","setFormData","database","ref","set","noteInput","alert","loadingActive","isFormComplete"],"mappings":";;;AAAA,SAASA,UAAT,EAAqBC,SAArB,QAAsC,OAAtC;AACA,OAAO,YAAP;AACA,SAASC,SAAT,QAA0B,UAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,uBAAvB;AACA,OAAOC,QAAP,MAAqB,iBAArB;AACA,OAAOC,kBAAP,MAA+B,sBAA/B;;;AAIA,SAASC,IAAT,GAAgB;AAAA;;AACd,QAAMC,UAAU,GAAGR,UAAU,CAACI,UAAD,CAA7B;AAEA,QAAMK,SAAS,GAAGJ,QAAQ,CAACK,IAAT,GAAgBC,WAAlC;;AAEA,MAAIF,SAAS,KAAK,IAAlB,EAAwB;AACtB;AACA,UAAMG,WAAW,GAAGH,SAAS,CAACG,WAA9B;AACA,UAAMC,KAAK,GAAGJ,SAAS,CAACI,KAAxB;AACA,UAAMC,QAAQ,GAAGL,SAAS,CAACK,QAA3B;AACA,UAAMC,aAAa,GAAGN,SAAS,CAACM,aAAhC,CALsB,CAOtB;AACA;AACA;;AACA,UAAMC,GAAG,GAAGP,SAAS,CAACO,GAAtB;AAED;;AAED,QAAMC,gBAAgB,GAAIC,CAAD,IAAO;AAC9B,UAAMC,SAAS,GAAGD,CAAC,CAACE,MAAF,CAASC,KAAT,CAAeC,MAAjC;AACA,QAAIC,QAAQ,GAAG,MAAMJ,SAArB;AACAX,IAAAA,UAAU,CAACgB,WAAX,CAAuBD,QAAvB;AACAf,IAAAA,UAAU,CAACiB,YAAX,CAAwBP,CAAC,CAACE,MAAF,CAASC,KAAjC;AACD,GALD;;AAOApB,EAAAA,SAAS,CAAC,MAAM;AACdyB,IAAAA,OAAO,CAACC,GAAR,CAAYnB,UAAU,CAACoB,QAAvB;AACD,GAFQ,EAEN,CAACpB,UAAU,CAACoB,QAAZ,CAFM,CAAT;;AAIA,QAAMC,YAAY,GAAG,MAAM;AACzBrB,IAAAA,UAAU,CAACsB,iBAAX,CAA6B,KAA7B;AACAtB,IAAAA,UAAU,CAACuB,gBAAX,CAA4B,IAA5B;AACAC,IAAAA,UAAU,CAAC,MAAM;AACf,UAAIxB,UAAU,CAACoB,QAAX,GAAsB,CAA1B,EAA6B;AAC3B,cAAMK,SAAS,GAAGzB,UAAU,CAAC0B,QAA7B;AAEAD,QAAAA,SAAS,CAAC,MAAD,CAAT,GAAoB/B,SAAS,CAAC,IAAIiC,IAAJ,EAAD,EAAa,qBAAb,CAA7B;AAEA3B,QAAAA,UAAU,CAAC4B,aAAX,CAA0BC,SAAD,IAAe;AACtC,iBAAO,CAACJ,SAAD,EAAY,GAAGI,SAAf,CAAP;AACD,SAFD;AAIA7B,QAAAA,UAAU,CAACiB,YAAX,CAAwB,EAAxB;AACAjB,QAAAA,UAAU,CAAC8B,WAAX,CAAuB,EAAvB;AAEAZ,QAAAA,OAAO,CAACC,GAAR,CAAYM,SAAZ;AAEA,cAAMxB,SAAS,GAAGJ,QAAQ,CAACK,IAAT,GAAgBC,WAAlC;;AACA,YAAIF,SAAS,KAAK,IAAlB,EAAwB;AACtB;AACA,gBAAMG,WAAW,GAAGH,SAAS,CAACG,WAA9B;AACA,gBAAMC,KAAK,GAAGJ,SAAS,CAACI,KAAxB;AACA,gBAAMC,QAAQ,GAAGL,SAAS,CAACK,QAA3B;AACA,gBAAMC,aAAa,GAAGN,SAAS,CAACM,aAAhC,CALsB,CAOtB;AACA;AACA;;AACA,gBAAMC,GAAG,GAAGP,SAAS,CAACO,GAAtB;AAIAX,UAAAA,QAAQ,CACPkC,QADD,GAECC,GAFD,CAEK,WAAW/B,SAAS,CAACO,GAArB,GAA0B,GAA1B,GAA+B,IAAImB,IAAJ,EAFpC,EAGCM,GAHD,CAGKR,SAHL;AAID,SAjC0B,CAmC3B;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AACAzB,QAAAA,UAAU,CAACuB,gBAAX,CAA4B,KAA5B;AACD;AACF,KA/CS,EA+CP,GA/CO,CAAV;AAgDD,GAnDD;;AAqDA,sBACE;AAAK,IAAA,SAAS,EAAC,cAAf;AAAA,4BACE;AACE,MAAA,SAAS,EAAC,YADZ;AAEE,MAAA,QAAQ,EAAEd,gBAFZ;AAGE,MAAA,IAAI,EAAC,MAHP;AAIE,MAAA,WAAW,EAAC,0BAJd;AAKE,MAAA,KAAK,EAAET,UAAU,CAACkC;AALpB;AAAA;AAAA;AAAA;AAAA,YADF,eAQE;AAAK,MAAA,SAAS,EAAC,cAAf;AAAA,8BACE;AAAA,+BACE;AAAK,UAAA,SAAS,EAAG,eAAclC,UAAU,CAACmC,KAAM,EAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANF,eAOE;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA,gCACE;AACE,UAAA,SAAS,EAAG,WAAUnC,UAAU,CAACoC,aAAc,EADjD;AAEE,UAAA,GAAG,EAAC,kBAFN;AAGE,UAAA,GAAG,EAAC;AAHN;AAAA;AAAA;AAAA;AAAA,gBADF,eAME;AACE,UAAA,QAAQ,EAAE,CAACpC,UAAU,CAACqC,cADxB;AAEE,UAAA,SAAS,EAAG,iBAAgB,CAACrC,UAAU,CAACqC,cAAe,QAFzD;AAGE,UAAA,OAAO,EAAEhB,YAHX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBANF;AAAA;AAAA;AAAA;AAAA;AAAA,cAPF;AAAA;AAAA;AAAA;AAAA;AAAA,YARF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAiCD;;GApHQtB,I;;KAAAA,I;AAsHT,eAAeA,IAAf","sourcesContent":["import { useContext, useEffect } from \"react\";\nimport \"../App.css\";\nimport { formatISO } from \"date-fns\";\nimport axios from \"axios\";\nimport AppContext from \"../context/AppContext\";\nimport firebase from \"../lib/firebase\";\nimport cryptoRandomString from 'crypto-random-string';\n\n\n\nfunction Form() {\n  const appContext = useContext(AppContext);\n\n  const userLogin = firebase.auth().currentUser;\n\n  if (userLogin !== null) {\n    // The userLogin object has basic properties such as display name, email, etc.\n    const displayName = userLogin.displayName;\n    const email = userLogin.email;\n    const photoURL = userLogin.photoURL;\n    const emailVerified = userLogin.emailVerified;\n\n    // The user's ID, unique to the Firebase project. Do NOT use\n    // this value to authenticate with your backend server, if\n    // you have one. Use User.getToken() instead.\n    const uid = userLogin.uid;\n    \n  }\n\n  const handleChangeNote = (e) => {\n    const charCount = e.target.value.length;\n    let charLeft = 140 - charCount;\n    appContext.setCarsLeft(charLeft);\n    appContext.setNoteInput(e.target.value);\n  };\n\n  useEffect(() => {\n    console.log(appContext.carsLeft);\n  }, [appContext.carsLeft]);\n\n  const handleSubmit = () => {\n    appContext.setIsFormComplete(false);\n    appContext.setLoadingActive(true);\n    setTimeout(() => {\n      if (appContext.carsLeft > 0) {\n        const finalData = appContext.formData;\n\n        finalData[\"date\"] = formatISO(new Date(), \"dd-MM-yyyy HH:mm:ss\");\n\n        appContext.setNotesArray((prevState) => {\n          return [finalData, ...prevState];\n        });\n\n        appContext.setNoteInput(\"\");\n        appContext.setFormData({});\n\n        console.log(finalData);\n\n        const userLogin = firebase.auth().currentUser;\n        if (userLogin !== null) {\n          // The userLogin object has basic properties such as display name, email, etc.\n          const displayName = userLogin.displayName;\n          const email = userLogin.email;\n          const photoURL = userLogin.photoURL;\n          const emailVerified = userLogin.emailVerified;\n\n          // The user's ID, unique to the Firebase project. Do NOT use\n          // this value to authenticate with your backend server, if\n          // you have one. Use User.getToken() instead.\n          const uid = userLogin.uid;\n\n        \n\n          firebase\n          .database()\n          .ref(\"users/\" + userLogin.uid +\"-\"+ new Date())\n          .set(finalData);\n        }\n\n        // axios.post('https://micro-blogging-dot-full-stack-course-services.ew.r.appspot.com/tweet', finalData)\n        // .then(res => {\n        //   console.log(res);\n        // })\n        // .catch(err => {\n        //   console.error(err);\n        // })\n\n        // localStorage.setItem(finalData[\"id\"], JSON.stringify(finalData));\n        appContext.setLoadingActive(false);\n      }\n    }, 500);\n  };\n\n  return (\n    <div className=\"form-wrapper\">\n      <textarea\n        className=\"tweet-form\"\n        onChange={handleChangeNote}\n        type=\"text\"\n        placeholder=\"What you have in mind...\"\n        value={appContext.noteInput}\n      />\n      <div className=\"tweet-bottom\">\n        <div>\n          <div className={`tweet-error-${appContext.alert}`}>\n            The tweet can't contain more then 140 chars.\n          </div>\n        </div>\n        <div> </div>\n        <div className=\"tweet-button\">\n          <img\n            className={`loading-${appContext.loadingActive}`}\n            src=\"/loadingLogo.svg\"\n            alt=\"loading\"\n          ></img>\n          <button\n            disabled={!appContext.isFormComplete}\n            className={`submit-button-${!appContext.isFormComplete} tweet`}\n            onClick={handleSubmit}\n          >\n            Tweet\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Form;\n"]},"metadata":{},"sourceType":"module"}