{"ast":null,"code":"import _defineProperty from\"/Users/javiercosio/Documents/ITC/tweet-react-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/javiercosio/Documents/ITC/tweet-react-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/javiercosio/Documents/ITC/tweet-react-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"../App.css\";import{useHistory}from\"react-router-dom\";import AppContext from\"../context/AppContext\";import{useContext,useState,useEffect}from\"react\";import firebase from\"../lib/firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Signup(){var appContext=useContext(AppContext);var _useState=useState({}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isFormComplete=_useState4[0],setIsFormComplete=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showAlert=_useState6[0],setShowAlert=_useState6[1];var history=useHistory();var handleInputEmail=function handleInputEmail(e){var name=e.target.name;var value=e.target.value;setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));};var handleInputUsername=function handleInputUsername(e){var name=e.target.name;var value=e.target.value;setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));};var handleInputPassword=function handleInputPassword(e){setShowAlert(true);var name=e.target.name;var value=e.target.value;setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));};useEffect(function(){console.log(formData);},[formData]);useEffect(function(){if(formData.email&&formData.password&&formData.confirmPassword&&formData.password===formData.confirmPassword// maybe check for is it an actual email and also password strength\n){setIsFormComplete(true);}else{setIsFormComplete(false);}},[formData]);useEffect(function(){if(formData.password!==formData.confirmPassword||!formData.password||!formData.confirmPassword){setShowAlert(true);}else{setShowAlert(false);}},[formData]);var handleSubmit=function handleSubmit(){firebase.auth().createUserWithEmailAndPassword(formData.email,formData.password).then(function(userCredential){// Signed in\nvar user=userCredential.user;var userObj={email:user.email,authId:user.uid,username:formData.username,created_date:Date.now(),updated_date:Date.now()};firebase.database().ref(\"users/\"+user.uid).set(userObj);}).catch(function(error){var errorCode=error.code;var errorMessage=error.message;console.log(errorCode,errorMessage);});var path=\"/login\";history.push(path);};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-left\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-title\",children:\"Sign up\"}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-subtitle\",children:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"profile-input\",type:\"text\",name:\"email\",onChange:handleInputEmail})}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-subtitle\",children:\"Username\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"profile-input\",type:\"text\",name:\"username\",onChange:handleInputUsername})}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-subtitle\",children:\"Password\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"profile-input\",type:\"password\",name:\"password\",onChange:handleInputPassword})}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-subtitle\",children:\"Confirm Password\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{className:\"profile-input\",type:\"password\",name:\"confirmPassword\",onChange:handleInputPassword}),\" \"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"signup-button-cotainer\",children:[/*#__PURE__*/_jsx(\"button\",{disabled:!isFormComplete,className:\"submit-button-\".concat(!isFormComplete),onClick:handleSubmit,children:\"Sign up\"}),showAlert&&/*#__PURE__*/_jsx(\"div\",{className:\"singup-error-\".concat(showAlert),children:\"Passwords must match\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"signup-right\"})]});}export default Signup;","map":{"version":3,"sources":["/Users/javiercosio/Documents/ITC/tweet-react-project/src/components/Signup.js"],"names":["useHistory","AppContext","useContext","useState","useEffect","firebase","Signup","appContext","formData","setFormData","isFormComplete","setIsFormComplete","showAlert","setShowAlert","history","handleInputEmail","e","name","target","value","handleInputUsername","handleInputPassword","console","log","email","password","confirmPassword","handleSubmit","auth","createUserWithEmailAndPassword","then","userCredential","user","userObj","authId","uid","username","created_date","Date","now","updated_date","database","ref","set","catch","error","errorCode","code","errorMessage","message","path","push"],"mappings":"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","sourcesContent":["import \"../App.css\";\nimport { useHistory } from \"react-router-dom\";\nimport AppContext from \"../context/AppContext\";\nimport { useContext, useState, useEffect } from \"react\";\nimport firebase from \"../lib/firebase\";\n\nfunction Signup() {\n  const appContext = useContext(AppContext);\n  const [formData, setFormData] = useState({});\n  const [isFormComplete, setIsFormComplete] = useState(false);\n  const [showAlert, setShowAlert] = useState(false);\n\n  const history = useHistory();\n\n  const handleInputEmail = (e) => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setFormData({ ...formData, [name]: value });\n  };\n  const handleInputUsername = (e) => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setFormData({ ...formData, [name]: value });\n  };\n  const handleInputPassword = (e) => {\n    setShowAlert(true);\n    const name = e.target.name;\n    const value = e.target.value;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  useEffect(() => {\n    console.log(formData);\n  }, [formData]);\n\n  useEffect(() => {\n    if (\n      formData.email &&\n      formData.password &&\n      formData.confirmPassword &&\n      formData.password === formData.confirmPassword\n      // maybe check for is it an actual email and also password strength\n    ) {\n      setIsFormComplete(true);\n    } else {\n      setIsFormComplete(false);\n    }\n  }, [formData]);\n\n  useEffect(() => {\n    if (\n      formData.password !== formData.confirmPassword ||\n      !formData.password ||\n      !formData.confirmPassword\n    ) {\n      setShowAlert(true);\n    } else {\n      setShowAlert(false);\n    }\n  }, [formData]);\n\n  const handleSubmit = () => {\n    firebase\n      .auth()\n      .createUserWithEmailAndPassword(formData.email, formData.password)\n      .then((userCredential) => {\n        // Signed in\n        const user = userCredential.user;\n        const userObj = {\n          email: user.email,\n          authId: user.uid,\n          username: formData.username,\n          created_date: Date.now(),\n          updated_date: Date.now(),\n        };\n\n        firebase\n          .database()\n          .ref(\"users/\" + user.uid)\n          .set(userObj);\n      })\n      .catch((error) => {\n        const errorCode = error.code;\n        const errorMessage = error.message;\n        console.log(errorCode, errorMessage);\n      });\n\n    let path = \"/login\";\n    history.push(path);\n  };\n\n  return (\n    <div className=\"profile-wrapper\">\n      <div className=\"profile-left\"></div>\n      <div className=\"profile-container\">\n        <div className=\"profile-title\">Sign up</div>\n        <div className=\"profile-subtitle\">Email</div>\n        <div>\n          <input\n            className=\"profile-input\"\n            type=\"text\"\n            name={`email`}\n            onChange={handleInputEmail}\n          />\n        </div>\n        <div className=\"profile-subtitle\">Username</div>\n        <div>\n          <input\n            className=\"profile-input\"\n            type=\"text\"\n            name={`username`}\n            onChange={handleInputUsername}\n          />\n        </div>\n        <div className=\"profile-subtitle\">Password</div>\n        <div>\n          <input\n            className=\"profile-input\"\n            type=\"password\"\n            name={`password`}\n            onChange={handleInputPassword}\n          />\n        </div>\n        <div className=\"profile-subtitle\">Confirm Password</div>\n        <div>\n          <input\n            className=\"profile-input\"\n            type=\"password\"\n            name={`confirmPassword`}\n            onChange={handleInputPassword}\n          />{\" \"}\n        </div>\n        <div className=\"signup-button-cotainer\">\n          <button\n            disabled={!isFormComplete}\n            className={`submit-button-${!isFormComplete}`}\n            onClick={handleSubmit}\n          >\n            Sign up\n          </button>\n          {showAlert && (\n            <div className={`singup-error-${showAlert}`}>\n              Passwords must match\n            </div>\n          )}\n        </div>\n      </div>\n      <div className=\"signup-right\"></div>\n    </div>\n  );\n}\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}