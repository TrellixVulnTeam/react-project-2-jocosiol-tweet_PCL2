{"ast":null,"code":"import _defineProperty from\"/Users/javiercosio/Documents/ITC/tweet-react-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/javiercosio/Documents/ITC/tweet-react-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/javiercosio/Documents/ITC/tweet-react-project/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"../App.css\";import{useHistory}from\"react-router-dom\";import AppContext from\"../context/AppContext\";import{useContext,useState,useEffect}from\"react\";import firebase from\"../lib/firebase\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var appContext=useContext(AppContext);var history=useHistory();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),formData=_useState2[0],setFormData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isFormComplete=_useState4[0],setIsFormComplete=_useState4[1];var handleChangeUserLogin=function handleChangeUserLogin(e){var name=e.target.name;var value=e.target.value;setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));};var handleChangePassLogin=function handleChangePassLogin(e){var name=e.target.name;var value=e.target.value;setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},name,value)));};useEffect(function(){console.log(formData);},[formData]);useEffect(function(){if(formData.email&&formData.password){setIsFormComplete(true);}else{setIsFormComplete(false);}},[formData]);var handleLoginSubmit=function handleLoginSubmit(){firebase.auth().signInWithEmailAndPassword(formData.email,formData.password).then(function(userCredential){// Signed in\nvar user=userCredential.user;var dbRef=firebase.database().ref();dbRef.child(\"users\").child(user.uid).get().then(function(snapshot){if(snapshot.exists()){console.log(user);console.log(snapshot.val());appContext.setUser(snapshot.val().username);//setRedirect(\"/\");\n}else{console.log(\"No data available\");}}).catch(function(error){console.error(error);});// ...\n}).catch(function(error){var errorCode=error.code;var errorMessage=error.message;console.log(errorCode,errorMessage);});//appContext.setUserInputFilled(false);\nvar path=\"/\";history.push(path);};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile-wrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-left\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-title\",children:\"Log in\"}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-subtitle\",children:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"profile-input\",type:\"text\",name:\"email\",onChange:handleChangeUserLogin})}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-subtitle\",children:\"Password\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{className:\"profile-input\",type:\"password\",name:\"password\",onChange:handleChangePassLogin})}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-button-cotainer\",children:/*#__PURE__*/_jsx(\"button\",{disabled:!isFormComplete,className:\"submit-button-\".concat(!isFormComplete),onClick:handleLoginSubmit,children:\"Log in\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"profile-right\"})]});}export default Login;","map":{"version":3,"sources":["/Users/javiercosio/Documents/ITC/tweet-react-project/src/components/Login.js"],"names":["useHistory","AppContext","useContext","useState","useEffect","firebase","Login","appContext","history","formData","setFormData","isFormComplete","setIsFormComplete","handleChangeUserLogin","e","name","target","value","handleChangePassLogin","console","log","email","password","handleLoginSubmit","auth","signInWithEmailAndPassword","then","userCredential","user","dbRef","database","ref","child","uid","get","snapshot","exists","val","setUser","username","catch","error","errorCode","code","errorMessage","message","path","push"],"mappings":"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","sourcesContent":["import \"../App.css\";\nimport { useHistory } from \"react-router-dom\";\nimport AppContext from \"../context/AppContext\";\nimport { useContext, useState, useEffect } from \"react\";\nimport firebase from \"../lib/firebase\";\n\nfunction Login() {\n  const appContext = useContext(AppContext);\n  const history = useHistory();\n  const [formData, setFormData] = useState({});\n  const [isFormComplete, setIsFormComplete] = useState(false);\n\n  const handleChangeUserLogin = (e) => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  const handleChangePassLogin = (e) => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setFormData({ ...formData, [name]: value });\n  };\n\n  useEffect(() => {\n    console.log(formData);\n  }, [formData]);\n\n  useEffect(() => {\n    if (formData.email && formData.password) {\n      setIsFormComplete(true);\n    } else {\n      setIsFormComplete(false);\n    }\n  }, [formData]);\n\n  const handleLoginSubmit = () => {\n    firebase\n      .auth()\n      .signInWithEmailAndPassword(formData.email, formData.password)\n      .then((userCredential) => {\n        // Signed in\n        const user = userCredential.user;\n        const dbRef = firebase.database().ref();\n        dbRef\n          .child(\"users\")\n          .child(user.uid)\n          .get()\n          .then((snapshot) => {\n            if (snapshot.exists()) {\n              console.log(user);\n              console.log(snapshot.val());\n              appContext.setUser(snapshot.val().username);\n              //setRedirect(\"/\");\n            } else {\n              console.log(\"No data available\");\n            }\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n        // ...\n      })\n      .catch((error) => {\n        var errorCode = error.code;\n        var errorMessage = error.message;\n        console.log(errorCode, errorMessage);\n      });\n\n    //appContext.setUserInputFilled(false);\n\n    let path = \"/\";\n    history.push(path);\n  };\n\n  return (\n    <div className=\"profile-wrapper\">\n      <div className=\"profile-left\"></div>\n      <div className=\"profile-container\">\n        <div className=\"profile-title\">Log in</div>\n        <div className=\"profile-subtitle\">Email</div>\n        <div>\n          <input\n            className=\"profile-input\"\n            type=\"text\"\n            name={`email`}\n            onChange={handleChangeUserLogin}\n          />\n        </div>\n        <div className=\"profile-subtitle\">Password</div>\n        <div>\n          <input\n            className=\"profile-input\"\n            type=\"password\"\n            name={`password`}\n            onChange={handleChangePassLogin}\n          />\n        </div>\n        <div className=\"profile-button-cotainer\">\n          <button\n            disabled={!isFormComplete}\n            className={`submit-button-${!isFormComplete}`}\n            onClick={handleLoginSubmit}\n          >\n            Log in\n          </button>\n        </div>\n      </div>\n      <div className=\"profile-right\"></div>\n    </div>\n  );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}